<!DOCTYPE html>
<html>

<head>


  <link href="https://fonts.googleapis.com/css2?family=M+PLUS+1+Code:wght@400;700&display=swap" rel="stylesheet">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=M+PLUS+1+Code:wght@100..700&display=swap" rel="stylesheet">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <link rel="icon"
    href="https://media.istockphoto.com/id/1392898737/vector/abstract-horizontal-background-with-colorful-waves.jpg?s=612x612&w=0&k=20&c=xxRagBOWElqfzxPho893QoNmB1HnAw9VM-UHkQhtih4=">
  <title>Lucas's First Website</title>
  <link href="./style.css" rel="stylesheet" type="text/css" />
</head>


<body class="index">
  <nav>
    <ul class="nav-links">
      <li><a href="./index.html">Home</a></li>
      <li><a href="./about.html">About</a></li>
      <li class="dropdown">
        <a class="games_buttons" href="./projects.html">Games</a>
        <div class="dropdown-games">
          <a href="./game1.html">Ball Jump</a>
          <a href="platform.html">PLATFORMER!</a>
          <a href="space.html">Space shooter</a>
          <a href="pong.html">Pong game</a>


        </div>
      </li>
      <li><a href="./content.html">Community</a></li>
    </ul>
  </nav>
  <h1 class="indexH1">Home</h1>
  <h2 class="indexH2">Game Website</h2>
  <h2 class="indexH2" id="total-count">...</h2>


  <div class="home_image">
    <img
      src="https://media.istockphoto.com/id/1392898737/vector/abstract-horizontal-background-with-colorful-waves.jpg?s=612x612&w=0&k=20&c=xxRagBOWElqfzxPho893QoNmB1HnAw9VM-UHkQhtih4=">
  </div>
  <!-- <script src="https://www.gstatic.com/firebasejs/11.3.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/11.3.0/firebase-database.js"></script> -->
  <script type="module">

    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.3.0/firebase-app.js";
    import { getDatabase, ref, onValue, runTransaction } from "https://www.gstatic.com/firebasejs/11.3.0/firebase-database.js";


    const firebaseConfig = {

      apiKey: "AIzaSyBx9DAV6B_yU9-WYsndjWgFKZ0yRL4bwms",
      authDomain: "first-website-db006.firebaseapp.com",
      databaseURL: "https://first-website-db006-default-rtdb.firebaseio.com",
      projectId: "first-website-db006",
      storageBucket: "first-website-db006.firebasestorage.app",
      messagingSenderId: "1085891243330",
      appId: "1:1085891243330:web:f3bb9cba88171fb3ffecdb"
    };


    const app = initializeApp(firebaseConfig);
    const database = getDatabase();
    const visitRef = ref(database, 'visits');
    function increment() {
      runTransaction(visitRef, curCount => {
        return (curCount || 0) + 1;
      });
    }

    function displayCounter() {
      onValue(visitRef, snapshot => {
        const count = snapshot.val() || 0;
        document.getElementById('total-count').innerText = `Total Visits: ${count}`;
      });
    }

    function tracker() {
      const visitorKey = "visited";
      if (!localStorage.getItem(visitorKey)) {
        increment();
        localStorage.setItem(visitorKey, "true");
      }
    }

    window.onload = () => {
      tracker();
      displayCounter();
    }


  </script>
</body>

</html>